<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Dooley Score for Clinical Breast Exams</title>

    <link href="static/thirdparty/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/thirdparty/bootstrap-slider/bootstrap-slider.min.css" rel="stylesheet">
    <link href="stats.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="section-title">Select Datasets</li>
            <li class="section">
                <div id="datasets" class="btn-group-vertical" data-toggle="buttons">
                </div>
            </li>
          </ul>
          <ul class="nav nav-sidebar">
            <li class="section-title">Dooley Score</li>
            <li class="section">
                <div>Components:</div>
                <small>
                  <table class="table table-condensed">
                    <tr>
                      <td><input type="checkbox" id="ds-mass" class="ds-component"> Mass</td>
                      <td><input type="checkbox" id="ds-mass2x" class="ds-component" checked> Mass x 2</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox" id="ds-ln" class="ds-component" checked> Axillary LNs</td>
                      <td><input type="checkbox" id="ds-t4" class="ds-component" checked> T4</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox" id="ds-heme" class="ds-component" checked> Heme DC</td>
                      <td><input type="checkbox" id="ds-ducts" class="ds-component"> Ducts</td>
                    </tr>
                    <tr>
                      <td colspan="2"><input type="checkbox" id="ds-hemeduct" class="ds-component"> Single duct, heme+</td>
                    </tr>
                  </table>
                </small>
            </li>
            <li class="section">
                <div>Threshold:</div>
                <input class="" id="threshold" data-slider-id='threshold-slider' type="text" data-slider-min="0" data-slider-max="12" data-slider-step="1" data-slider-value="4"/>
            </li>
          </ul>
        </div>
        <div class="col-sm-10 col-sm-offset-2 main">
            <h2 class="sub-header">Summary</h2>
            <div class="row">
                <div class="col-md-4">
                    <h4>Outcomes (Dooley Score)</h4>
                    <table class="table">
                      <thead>
                        <tr>
                          <th></th>
                          <th>Cancer</th>
                          <th>No Cancer</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th>Score &ge; <span class="outcome-threshold">x</span></th>
                          <td><span id="true-pos"></span></td>
                          <td><span id="false-pos"></span></td>
                          <th>Total: <span id="outcome-ttl-row-1">a+b</span></th>
                        </tr>
                        <tr>
                          <th>Score &lt; <span class="outcome-threshold">x</span></th>
                          <td><span id="false-neg"></span></td>
                          <td><span id="true-neg"></span></td>
                          <th>Total: <span id="outcome-ttl-row-2">c+d</span></th>
                        </tr>
                        <tr>
                          <th></th>
                          <th>Total: <span id="outcome-ttl-col-1">a+c</span></th>
                          <th>Total: <span id="outcome-ttl-col-2">b+d</span></th>
                          <th>n = <span id="n">n</span></th>
                        </tr>
                      </tbody>
                    </table>
                </div>
                <div class="col-md-4">
                    <h4>Dooley Score:</h4>
                    <div id="graph1" class="graph"></div>
                </div>
                <div class="col-md-4">
                    <h4>BIRADS Score:</h4>
                    <div id="graph2" class="graph"></div>
                </div>
            </div>

            
            <h2 class="sub-header">Evaluation</h2>
            <div class="row">
                <div class="col-md-6">
                    <h4>Performance</h4>
                    <table id="params" class="table table-striped table-bordered">
                        <tr>
                          <th></th>
                          <th>Dooley Score</th>
                          <th>BIRADS</th>
                          <th>Combined</th>
                        </tr>
                        <tr>
                          <th class="shrink">Samples (n)</th>
                          <td class=""><span id="samples"></span></td>
                          <td class=""><span id="birads-samples"></span></td>
                          <td class=""><span id="combined-samples"></span></td>
                        </tr>
                        <tr>
                          <th class="shrink">Sensitivity</th>
                          <td class=""><span id="sensitivity"></span></td>
                          <td class=""><span id="birads-sensitivity"></span></td>
                          <td class=""><span id="combined-sensitivity"></span></td>
                        </tr>
                        <tr>
                          <th class="shrink">Specifity</th>
                          <td class=""><span id="specificity"></span></td>
                          <td class=""><span id="birads-specificity"></span></td>
                          <td class=""><span id="combined-specificity"></span></td>
                        </tr>
                        <tr>
                          <th class="shrink">PPV</th>
                          <td class=""><span id="ppv"></span></td>
                          <td class=""><span id="birads-ppv"></span></td>
                          <td class=""><span id="combined-ppv"></span></td>
                        </tr>
                        <tr>
                          <th class="shrink">NPV</th>
                          <td class=""><span id="npv"></span></td>
                          <td class=""><span id="birads-npv"></span></td>
                          <td class=""><span id="combined-npv"></span></td>
                        </tr>
                        <tr>
                          <th class="shrink">Accuracy</th>
                          <td class=""><span id="accuracy"></span></td>
                          <td class=""><span id="birads-accuracy"></span></td>
                          <td class=""><span id="combined-accuracy"></span></td>
                        </tr>
                    </table>

                    <div class="spacer"></div>
                    <h4>Dooley Score vs BIRADS</h4>
                    <table class="table table-striped table-bordered table-middle">
                        <tr>
                          <th></th>
                          <th>Difference</th>
                          <th>McNemar p-value</th>
                          <th>McNemar Data</th>
                        </tr>
                        <tr>
                          <th class="shrink">Sensitivity</th>
                          <td class=""><span id="sensitivity-diff"></span></td>
                          <td class=""><span id="sensitivity-mcnemar"></span></td>
                          <td class="">
                            <small>
                              <table class="table table-condensed table-bordered table-embedded">
                                <tr>
                                  <td><center><i>Cancer</i></center></td>
                                  <th class="shrink">BIRADS +</th>
                                  <th class="shrink">BIRADS -</th>
                                </tr>
                                <tr>
                                  <th class="shrink">Combined +</th>
                                  <td id="sensitivity-pospos"></td>
                                  <td id="sensitivity-posneg"></td>
                                </tr>
                                <tr>
                                  <th class="shrink">Combined -</th>
                                  <td id="sensitivity-negpos"></td>
                                  <td id="sensitivity-negneg"></td>
                                </tr>
                              </table>
                            </small>
                          </td>
                        </tr>
                        <tr>
                          <th class="shrink">Specifity</th>
                          <td class=""><span id="specificity-diff"></span></td>
                          <td class=""><span id="specificity-mcnemar"></span></td>
                          <td class="">
                            <small>
                              <table class="table table-condensed table-bordered table-embedded">
                                <tr>
                                  <td><center><i>No Cancer</i></center></td>
                                  <th>BIRADS -</th>
                                  <th>BIRADS +</th>
                                </tr>
                                <tr>
                                  <th>Combined -</th>
                                  <td id="specificity-negneg"></td>
                                  <td id="specificity-negpos"></td>
                                </tr>
                                <tr>
                                  <th>Combined +</th>
                                  <td id="specificity-posneg"></td>
                                  <td id="specificity-pospos"></td>
                                </tr>
                              </table>
                            </small>
                          </td>
                        </tr>
                    </table>

                    <div class="spacer"></div>
                    <h4>Combined vs BIRADS</h4>
                    <table class="table table-striped table-bordered table-middle">
                        <tr>
                          <th></th>
                          <th>Difference</th>
                          <th>McNemar p-value</th>
                          <th>McNemar Data</th>
                        </tr>
                        <tr>
                          <th class="shrink">Sensitivity</th>
                          <td class=""><span id="combined-sensitivity-diff"></span></td>
                          <td class=""><span id="combined-sensitivity-mcnemar"></span></td>
                          <td class="">
                            <small>
                              <table class="table table-condensed table-bordered table-embedded">
                                <tr>
                                  <td><center><i>Cancer</i></center></td>
                                  <th class="shrink">BIRADS +</th>
                                  <th class="shrink">BIRADS -</th>
                                </tr>
                                <tr>
                                  <th class="shrink">Combined +</th>
                                  <td id="combined-sensitivity-pospos"></td>
                                  <td id="combined-sensitivity-posneg"></td>
                                </tr>
                                <tr>
                                  <th class="shrink">Combined -</th>
                                  <td id="combined-sensitivity-negpos"></td>
                                  <td id="combined-sensitivity-negneg"></td>
                                </tr>
                              </table>
                            </small>
                          </td>
                        </tr>
                        <tr>
                          <th class="shrink">Specifity</th>
                          <td class=""><span id="combined-specificity-diff"></span></td>
                          <td class=""><span id="combined-specificity-mcnemar"></span></td>
                          <td class="">
                            <small>
                              <table class="table table-condensed table-bordered table-embedded">
                                <tr>
                                  <td><center><i>No Cancer</i></center></td>
                                  <th>BIRADS -</th>
                                  <th>BIRADS +</th>
                                </tr>
                                <tr>
                                  <th>Combined -</th>
                                  <td id="combined-specificity-negneg"></td>
                                  <td id="combined-specificity-negpos"></td>
                                </tr>
                                <tr>
                                  <th>Combined +</th>
                                  <td id="combined-specificity-posneg"></td>
                                  <td id="combined-specificity-pospos"></td>
                                </tr>
                              </table>
                            </small>
                          </td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-6">
                    <h4>ROC</h4>
                    <div id="graph3" class="graph"></div>
                    <table class="table table-striped table-bordered table-middle">
                        <tr>
                          <th class="shrink">Combined formula</th>
                          <td><small id="formula"></small></td>
                        </tr>
                        <tr>
                          <th class="shrink">Approx<sup>*</sup> Dooley AUC</th>
                          <td id="dooley-auc"></td>
                        </tr>
                        <tr>
                          <th class="shrink">Approx<sup>*</sup> BIRADS AUC</th>
                          <td id="birads-auc"></td>
                        </tr>
                        <tr>
                          <th class="shrink">Approx<sup>*</sup> Combined AUC</th>
                          <td id="combined-auc"></td>
                        </tr>
                    </table>
                    <small><i>* AUC calculated by DeLong method varies up to 5% from estimate</i></small>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                </div>
                <div class="col-md-6">
                </div>
            </div>
      </div>
    </div>

    <!-- Templates -->
    <script id="dataset-template" type="text/template">
        <label id="<%= id %>" class="dataset btn btn-sm btn-default">
            <input type="checkbox"><%= name %></input>
        </label>
    </script>

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="static/thirdparty/jquery.min.js"></script>
    <script src="static/thirdparty/bootstrap/js/bootstrap.min.js"></script>
    <script src="static/thirdparty/bootstrap-slider/bootstrap-slider.min.js"></script>
    <script src="static/thirdparty/flotr2.min.js"></script>
    <script src="data.js"></script>
    <script src="stats.js"></script>
  </body>
</html>
